# é—®é¢˜ï¼šä¸æ˜¯æ‰€æœ‰çš„ç½‘ç»œéƒ½æ˜¯ç›´æ¥æƒ³è¿çš„

ç”±äºä»¥å¤ªç½‘ Ethernet åªèƒ½è¿æ¥ä¸è¶…è¿‡ 10254 ä¸ªè®¾å¤‡ï¼Œæ— çº¿ç½‘ç»œå—é™äºæ— çº¿ç”µèŒƒå›´ï¼Œæ‰€ä»¥ä¸ºäº†å®ç°äº’è”ç½‘ï¼Œéœ€è¦è¿æ¥ä¸åŒç§ç±»çš„ç½‘ç»œï¼Œå³ *Internetworking* 
å…¶ä¸­å¯ä»¥åˆ†ä¸ºå‡ ä¸ªå­é—®é¢˜
- *swithes/bridges/Layer 2 switches*: ç”¨äº interconnect Ethernet segmentsï¼Œå³è¿æ¥**ç›¸åŒç±»å‹**çš„è®¾å¤‡
- *gateways/routes/Layer 3 switches*: ç”¨äºè¿æ¥**ä¸åŒç±»å‹**çš„ç½‘ç»œå’Œè¿æ¥

äº¤æ¢æœºå·¥ä½œåœ¨é“¾è·¯å±‚ï¼Œè·¯ç”±å™¨å·¥ä½œåœ¨ç½‘ç»œå±‚

# 3.4 Routing

å…³äº Routing çš„åŸºæœ¬é—®é¢˜ï¼šswitches å’Œ routers æ€æ ·åœ¨ forwarding tables ä¸­è·å¾—ä¿¡æ¯ã€‚

ğŸ”‘Key Takeaway

1. forwarding (è½¬å‘) å’Œ routing (è·¯ç”±) çš„åŒºåˆ«ï¼š
	- Forwardingï¼šæ”¶åˆ° packet ç„¶ååœ¨è¡¨ä¸­æŸ¥è¯¢åœ°å€å¹¶æŠŠå…¶é€åˆ°ç›®çš„åœ°ã€‚åœ¨æ¯ä¸ªèŠ‚ç‚¹æœ¬åœ°æ‰§è¡Œã€‚ç½‘ç»œçš„*data plane*
	- Routingï¼šforwarding table å»ºç«‹çš„è¿‡ç¨‹ï¼Œä¾èµ–å¤æ‚çš„ distributed algorithmsã€‚ç½‘ç»œçš„ *control plane*
2. forwarding table å’Œ routing table çš„åŒºåˆ«ï¼š
	- forwarding tableï¼šå½“ packet è¢«è½¬å‘çš„æ—¶å€™è½¬å‘è¡¨åº”è¯¥åŒ…å« network prefix åˆ° outgoing interface çš„æ˜ å°„å’Œä¸€äº› MAC ä¿¡æ¯ï¼Œåˆ©äº Ethernet address of the next hopã€‚æ•°æ®ç»“æ„æœåŠ¡äºè½¬å‘æ—¶å¿«é€Ÿå¯»å€ã€‚
	- routing tableï¼šé€šè¿‡ routing algorithms å»ºç«‹çš„è¡¨æ ¼ï¼Œæ˜¯æ„å»º forwarding table çš„å…ˆé©±ã€‚æ•°æ®ç»“æ„æœåŠ¡äºè®¡ç®—æ‹“æ‰‘ç»“æ„çš„æ”¹å˜ã€‚

## 3.4.1 Network as a Graph

routing çš„åŸºæœ¬é—®é¢˜ï¼šå¯»æ‰¾ä¸¤ä¸ªèŠ‚ç‚¹çš„ lowerst-cost path

## 3.4.2 Distance-Vector (RIP) 

ä¸¤ç§æ›´æ–°è·¯ç”±çš„æ–¹å¼ï¼šå®šæœŸæ›´æ–°å’Œè§¦å‘æ›´æ–°

count to infinity problemï¼š
ç”±äºæ›´æ–°çš„äº¤é”™ï¼Œæ²¡æœ‰ä¸€ä¸ªèŠ‚ç‚¹çŸ¥é“å…¶ä¸­æŸä¸€ä¸ªèŠ‚ç‚¹å·²ç»ä¸å¯è®¿é—®äº†ï¼Œæ­¤æ—¶ç½‘ç»œçš„è·¯ç”±è¡¨ä¸ç¨³å®šã€‚
è§£å†³åŠæ³•ä¹‹ä¸€ï¼šsplit horizon (with poison reverse) ï¼Œä½†æ˜¯è¿™åªé€‚ç”¨äºä¸¤ä¸ªèŠ‚ç‚¹çš„è·¯ç”±å¾ªç¯

## 3.4.3 Link State (OSPF)

Link-state routing æ˜¯ç¬¬äºŒå¤§ä¸»è¦ç±»å†…éƒ¨è·¯ç”±åè®®ã€‚

Link-state protocols èƒŒåçš„åŸºæœ¬æ€æƒ³å¾ˆç®€å•ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½çŸ¥é“å¦‚ä½•ç›´æ¥åˆ°è¾¾ç›¸è¿çš„é‚»å±…ï¼Œå³æ¯ä¸ªèŠ‚ç‚¹éƒ½å°†æœ‰è¶³å¤Ÿçš„ç½‘ç»œçŸ¥è¯†æ¥æ„å»ºå®Œæ•´çš„ç½‘ç»œåœ°å›¾ã€‚æ‰€ä»¥ï¼Œlink-state routing protocals ä¾èµ–ä¸¤ä¸ªä¸»è¦æœºåˆ¶ï¼šå¯é çš„é“¾æ¥ä¿¡æ¯å’Œæ ¹æ®æ‰€æœ‰ç§¯ç´¯çš„é“¾è·¯çŠ¶æ€çŸ¥è¯†çš„æ€»å’Œæ¥è®¡ç®—è·¯ç”±ã€‚

Reliable Floodingï¼šæ¯ä¸ªèŠ‚ç‚¹ä¼šåˆ›å»ºä¸€ä¸ªæ›´æ–°æ•°æ®åŒ…ï¼Œå«åšï¼ˆlink-state packet, LSPï¼‰ï¼Œå…¶ä¸­é‡Œé¢åŒ…å«ï¼šè®¡ç®— route æ‰€éœ€çš„å‚æ•°ï¼Œè®©æ´ªæ³›å¯é çš„ä¿¡æ¯ã€‚äº‹å®è¯æ˜ï¼Œè®©æ´ªæ³›å¯é éå¸¸å›°éš¾ã€‚

Route Calculationï¼šä¾èµ– Dijkstra's ç®—æ³•












